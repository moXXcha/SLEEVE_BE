# Linter と Formatter の手引き

このドキュメントは、このプロジェクトで `golangci-lint` を通じて適用される静的コード解析（Linter）とコードフォーマットのルールをまとめたものです。設定は `app/.golangci.yml` に定義されています。

## フォーマッター (Formatter)

コードの一貫性を保つため、`golangci-lint` はコードフォーマッターを自動的に実行します。このプロジェクトでは主に `goimports` が使用されます。

### 主な動作

`goimports` は、Goの標準フォーマッターである `gofmt` の全機能に加えて、以下の動作を自動で行います。

- **コードの整形**: インデント、スペース、括弧の位置などを標準スタイルに修正します。
- **インポートの管理**:
    - コード中で使用されているパッケージを検出し、必要なインポート文を自動で追加します。
    - 不要になったインポート文を自動で削除します。
- **インポートの順序整理**: インポート文を以下の3つのグループに分け、アルファベット順に並べ替えます。
    1. 標準ライブラリ
    2. サードパーティライブラリ
    3. 内部パッケージ（このプロジェクトでは `sleeve` で始まるもの）

### 設定

フォーマッターの動作は `app/.golangci.yml` で設定されています。

```yaml
linters-settings:
  goimports:
    local-prefixes: sleeve # 'sleeve'で始まるパスを内部パッケージとして扱う
```

### 実行方法

フォーマットを実際に適用（ファイルを修正）するには、`app` ディレクトリで以下のコマンドを実行します。

```bash
golangci-lint run --fix
```

## 有効な Linter

以下の Linter が明示的に有効化されており、潜在的なバグや悪い実装習慣を検出します。

- **`errcheck`**: Goプログラム内のチェックされていないエラーを検出します。（注: `_test.go` ファイルでは無効化されています）。
- **`govet`**: `printf` のフォーマット文字列の問題や変数のシャドーイングなど、疑わしい構造を報告します。
- **`staticcheck`**: バグ、パフォーマンスの問題、コードの簡略化の機会など、多岐にわたる静的解析チェックを提供します。
- **`unused`**: 使用されていない定数、関数、型、変数を検出します。
- **`ineffassign`**: 一度も使われない値が変数に代入されている箇所を検出します。
- **`gocritic`**: 他のツールではカバーされていないGoコードの問題（スタイル、パフォーマンス、バグなど）を診断します。
- **`nolintlint`**: `//nolint` コメントに対して、linterの指定や理由の記述を強制するルールを適用します。
- **`unconvert`**: 不要な型変換を報告します。
