本ドキュメントは、本システムにおける技術スタック選定の根拠を明示し、  
新規エンジニアやAI支援ツールが参画しやすいように整理したものです。  

---

## 1. 認証・セキュリティ

| 項目        | 採用技術                        | 採用理由                               |
| --------- | --------------------------- | ---------------------------------- |
| 認証基盤      | Firebase Authentication     | GCPとの親和性が高い。広範な無料枠あり。モバイル向けSDKが充実。 |
| 認可方針      | JWT + リフレッシュToken           | ステートレスでスケーラビリティが高い。モバイル環境と相性良好。    |
| パスワード暗号方式 | Argon2                      | 強固なセキュリティ。耐GPU総当たり攻撃性に優れる。         |
| OAuth連携   | Google / Apple / X(Twitter) | ユーザビリティ向上、既存アカウント利用を促進。            |
| MFA       | SMS                         | UX優先。ユーザーにとって分かりやすい。               |
| 秘密情報管理    | GCP Secret Manager          | GCPとの統合性。アクセス制御と監査が容易。             |
| セキュリティ標準  | PCI DSS / OWASP MASVS       | 金融系を扱うため必須。モバイルアプリ向け標準も採用。         |

---

## 2. データ管理

| 項目                | 採用技術                         | 採用理由                                |
| ----------------- | ---------------------------- | ----------------------------------- |
| メインDB             | PostgreSQL                   | 金融情報を扱うため複雑なトランザクション対応が必須。信頼性・実績豊富。 |
| キャッシュストア / ベクトル検索 | Redis                        | 高速キャッシュとベクトル検索を両立。シンプルで管理コスト低い。     |
| 検索エンジン            | Managed Elasticsearch on GCP | 複数属性検索が予想されるため。GCPマネージド利用で運用工数削減。   |
| オブジェクトストレージ       | GCP Cloud Storage            | GCPサービス統一のため。耐久性・スケーラビリティが高い。       |
| CDN               | Cloud CDN                    | GCPに統一。低遅延配信を実現。                    |

---

## 3. バックエンド / API

| 項目          | 採用技術          | 採用理由                                           |
| ----------- | ------------- | ---------------------------------------------- |
| サーバーフレームワーク | gqlgen (Go)   | 型安全なGraphQL実装。パフォーマンス良好。                       |
| API         | GraphQL       | クライアントに柔軟なデータ取得を許容。React Nativeとの親和性が高い。       |
| アーキテクチャ     | 3層、clean混ぜ混ぜ  | **実装は三層のシンプルさ**を保ちながら、**アーキテクチャの伸びしろ**を確保できるから |
| linter      | golangci-lint |                                                |
| 自動format    | goimports     |                                                |
| ORM         | ent           | schemaでの制御をしたいから                               |
アーキテクチャ例
1. **Resolver**

• 「GraphQL I/O担当」

• 入力を受け取り → UseCase呼び出し → 出力返すだけ

2. **UseCase (Service)**

• 「手続きの流れを書く場所」

• ユースケース単位の操作をまとめる

• AIに「自然言語でユースケースを説明」したら、ここを生成させる

3. **Domain**

• 「ビジネスルール（不変条件・検証）」

• Entity, ValueObject, DomainService

• AIに「ルールや制約はDomainに書け」と明示する

4. **Repository / Infrastructure**

• 「永続化・外部サービス接続」
	interface と実装を分ける
---

## 4. フロントエンド

| 項目                | 採用技術                   | 採用理由                        |
| ----------------- | ---------------------- | --------------------------- |
| モバイルアプリ           | React Native           | iOS/Android両対応。開発スピード重視。    |
| 管理UI              | React Admin            | ノーコード/ローコードを避け、OSSで柔軟に構築可能。 |
| コンポーネントアーキテクチャ    | atomic design          | デザインシステムを実装しやすい、UIの再利用性が高まる |
| ロジックアーキテクチャ       | MVVM                   | UI体験を保ちながらロジックを整理できる        |
| UIライブラリ           | native-wind            | web likeな開発を保つため            |
| コード生成             | GraphQL Code Generator | graphqlを使用するため              |
| API client        | apollo client          | graphqlを使用するため              |
| フレームワーク           | Expo                   | 容易な開発性                      |
| linter, formatter | Biome                  |                             |

---

## 5. AI・レコメンド

| 項目 | 採用技術 | 採用理由 |
|------|-----------|-----------|
| レコメンド基盤 | GCP Recommendations AI | 要件的に自前構築の必要性が薄い。GCP統合により導入容易。 |
| 学習フレームワーク | Pytorch（必要時） | 現状不要。将来拡張時に学習コストが低いため選定。 |

---

## 6. 決済 / 金融連携

| 項目 | 採用技術 | 採用理由 |
|------|-----------|-----------|
| 決済ゲートウェイ | Stripe | サブスク/ECどちらにも対応。実績豊富。 |
| 銀行口座連携 | Stripe Connect | 金融系の入出金連携が可能。 |

---

## 7. 通知・メッセージング

| 項目 | 採用技術 | 採用理由 |
|------|-----------|-----------|
| プッシュ通知 | Firebase Cloud Messaging | 無料利用可能。モバイル親和性高い。 |
| メール通知 | Amazon SES | コストが低い。パーソナライズ要件なし。 |
| メッセージング基盤 | GCP Pub/Sub | 非同期処理に利用。GCP統一のため。 |

---

## 8. 運用・監視

| 項目 | 採用技術 | 採用理由 |
|------|-----------|-----------|
| メトリクス監視 | Datadog | 機能豊富。導入が容易。 |
| ログ収集 | Datadog Logs | 同上。統合ダッシュボード管理可能。 |
| エラートラッキング | Sentry | 導入コストが低い。開発初期向け。 |
| APM | Datadog APM | メトリクス・ログと統一管理。 |
| インシデント通知 | Slack | チーム文化に合致。即時対応が可能。 |

---

## 9. インフラ基盤

| 項目 | 採用技術 | 採用理由 |
|------|-----------|-----------|
| クラウドプロバイダ | GCP | サービス全体をGCPに寄せることで統一性確保。 |
| コンテナ基盤 | Docker / Kubernetes | スケーラビリティとポータビリティ確保。 |
| CI/CD | GitHub Actions | OSSとの親和性が高く、導入が容易。 |
| IaC | Terraform | インフラ構成管理の標準。チームで再現性を確保。 |

---

## まとめ

- **一貫性のあるGCP中心の選定** により、運用・開発コストを削減。  
- **Stripe, SES など一部外部サービスは最適性を優先** し導入。  
- **短期MVP開発に適した選定** としつつ、将来拡張時の移行余地も残している。  

---