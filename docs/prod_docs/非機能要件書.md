# 機能要件 × 非機能要件 マッピング表

本ドキュメントは、機能要件と非機能要件の依存関係を整理したものです。  
これにより「機能実装のために必要な基盤要件」が明確になります。  

---

## 1. ログイン不要機能

### 1.1 レコメンド系（AI要件あり）
- コーデおすすめ取得 / itemおすすめ取得 / tagおすすめ取得 / searchおすすめ取得
- **依存する非機能要件**
  - 性能要件：レスポンス 5 ~ 8秒以内  
  - 拡張性要件：モデル差し替え可能な設計  
  - 運用要件：モデル更新時のデプロイフロー  

### 1.2 検索機能（AI要件あり）
- **依存する非機能要件**
  - 性能要件：検索結果 5 秒以内  
  - 可用性要件：高トラフィック時のスケールアウト  
  - 保守性要件：ログ収集・検索クエリ分析  

### 1.3 閲覧系（詳細取得・profile閲覧など）
- **依存する非機能要件**
  - 性能要件：レスポンス 2 秒以内  
  - 可用性要件：99.9% 稼働率  
  - 運用要件：監視・エラートラッキング  

---

## 2. ログイン必須機能

### 2.1 アカウント管理
- profile作成 / 編集 / follow / mfa認証 など
- **依存する非機能要件**
  - セキュリティ要件：OAuth2.0 / MFA / 暗号化  
  - 性能要件：ログイン・プロフィール取得は 2 秒以内  
  - 保守性要件：Sentry によるユーザー操作ログ収集  

### 2.2 コーデ投稿・編集・削除
- **依存する非機能要件**
  - 可用性要件：バックアップ・リストア対応  
  - 運用要件：通報・削除対応フロー  
  - 法規制：ユーザーデータ削除リクエスト対応  

### 2.3 アイテム出品・購入
- **依存する非機能要件**
  - セキュリティ要件：決済は PCI DSS 準拠  
  - 性能要件：購入処理は 3 秒以内  
  - 可用性要件：トランザクション整合性保証  

### 2.4 通知・お知らせ・通報
- **依存する非機能要件**
  - 運用要件：アラート通知フロー（オンコール対応）  
  - 保守性要件：お知らせ配信ログの保存  
  - 可用性要件：ユーザーBANやアラート操作の即時反映  

---

## 3. 管理者機能（管理画面）

- 通報一覧 / userBAN / 検索 / お知らせ配信 など
- **依存する非機能要件**
  - セキュリティ要件：管理者アカウントの多要素認証必須  
  - 保守性要件：監査ログを 1 年保存  
  - 運用要件：障害対応フローに沿ったインシデント管理  
  - 法規制：個人情報保護法 / GDPR  

---

## 4. 共通要件（すべての機能に関わる）

- **依存する非機能要件**
  - 性能：レスポンス SLA  
  - 可用性：99.9%以上の稼働率  
  - セキュリティ：TLS1.2 以上必須、パスワードハッシュ化  
  - 運用：監視（Prometheus / Datadog / Sentry）  
  - 拡張性：Kubernetes によるオートスケール  